<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Interaktiv Montasjevisning</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîß</text></svg>">
    <link rel="stylesheet" href="assembly-viewer.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
    <div id="canvas-container"></div>
    <div id="status">Laster...</div>
    <div id="settingsOverlay">
        <div id="settingsTitle">Innstillinger</div>
        <div class="settings-section">
            <label for="upAxis">Opp-akse:</label>
            <select id="upAxis">
                <option value="X">X-akse</option>
                <option value="-X">-X-akse</option>
                <option value="Y" selected>Y-akse</option>
                <option value="-Y">-Y-akse</option>
                <option value="Z">Z-akse</option>
                <option value="-Z">-Z-akse</option>
            </select>
        </div>
        <div class="settings-section">
            <label for="materialColor">Materialfarge:</label>
            <input type="color" id="materialColor" value="#1a1a1a">
        </div>
        <div class="settings-section">
            <label for="glossiness">Ruhet:</label>
            <input type="range" id="glossiness" min="0" max="1" step="0.01" value="0.2">
        </div>
        <div class="settings-section">
            <label for="lightIntensity">Lysstyrke:</label>
            <input type="range" id="lightIntensity" min="0.5" max="2" step="0.1" value="1.0">
        </div>
        <div class="settings-section">
            <label for="shadowQuality">Skyggekvalitet:</label>
            <select id="shadowQuality">
                <option value="1024">Lav</option>
                <option value="2048" selected>Middels</option>
                <option value="4096">H√∏y</option>
            </select>
        </div>
        <div class="settings-section">
            <label for="orthographicToggle">Ortografisk kamera:</label>
            <input type="checkbox" id="orthographicToggle">
        </div>
        <div class="settings-section">
            <label for="applyScope">Bruk endringer p√•:</label>
            <select id="applyScope">
                <option value="global">Globalt</option>
                <option value="current">N√•v√¶rende modell</option>
            </select>
        </div>
        <div class="settings-section">
            <button id="resetSettings">Tilbakestill til standard</button>
        </div>
    </div>
    <div id="partInfoOverlay">
        <div id="partName"></div>
        <div id="partNumber"></div>
        <div id="partDescription"></div>
        <div class="button-container">
            <div class="button-row">
                <button id="isolatePart">Isoler del</button>
                <button id="showAllPartsBtn" style="display: none;">Vis alle deler</button>
                <button id="toggleGhostMode">Sp√∏kelsesmodus</button>
            </div>
            
            <!-- Sectioning Controls -->
            <div class="sectioning-section">
                <h4>Seksjonsverkt√∏y</h4>
                <div class="section-group">
                    <label for="sectionPlaneType">Seksjonsplan:</label>
                    <select id="sectionPlaneType">
                        <option value="XY">XY-plan (Horisontalt)</option>
                        <option value="XZ">XZ-plan (Frontalt)</option>
                        <option value="YZ">YZ-plan (Side)</option>
                    </select>
                </div>
                <div class="section-group">
                    <label for="sectionPosition">Posisjon:</label>
                    <input type="range" id="sectionPosition" min="-1" max="1" step="0.01" value="0">
                    <span id="sectionPositionValue">0.00</span>
                </div>
                <div class="section-buttons">
                    <button id="createSection" class="section-btn">Lag seksjon</button>
                    <button id="removeSection" class="section-btn">Fjern seksjon</button>
                    <button id="resetSection" class="section-btn">Tilbakestill visning</button>
                </div>
                <div class="section-toggle">
                    <label for="showCuttingPlane">Vis skj√¶replan:</label>
                    <input type="checkbox" id="showCuttingPlane" checked>
                </div>
                <div class="video-controls" id="videoControls" style="display: none;">
                    <button id="playVideo" class="section-btn" disabled>Ingen video tilgjengelig</button>
                    <button id="stopVideo" class="section-btn" style="display: none;">Stopp video</button>
                </div>
            </div>
            <div class="view-button-grid">
                <button id="frontView" title="Foranvisning">‚Üó</button>
                <button id="topView" title="Toppvisning">‚Üë</button>
                <button id="backView" title="Bakvisning">‚Üô</button>
                <button id="isometricView" title="Isometrisk visning">‚üê</button>
            </div>
        </div>
    </div>
    <div id="partsList"></div>
    
    
    <div id="stats">
        <div>Totalt: <span id="totalParts">0</span></div>
        <div>Valgt: <span id="selectedPart">Ingen</span></div>
        <div>Synlig: <span id="visibleParts">0</span></div>
    </div>
    
    <!-- Video Overlay -->
    <div id="videoOverlay" style="display: none;">
        <div id="videoContainer">
            <img id="videoFrame" src="" alt="Video Frame">
            <div id="videoOverlayControls">
                <button id="videoPlayPause">‚è∏Ô∏è</button>
                <button id="videoClose">‚úï</button>
            </div>
        </div>
    </div>
    <button id="settingsGear" class="gear-button">&#9881;</button>
    <script src="part-analyzer.js?v=45"></script>
    <script src="part-manager.js?v=45"></script>
    <script src="assembly-viewer.js?v=45"></script>
</body>
</html>