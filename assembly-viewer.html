<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Interactive Assembly Viewer</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîß</text></svg>">
    <link rel="stylesheet" href="assembly-viewer.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
    <div id="canvas-container"></div>
    <div id="status">Loading...</div>
    <div id="settingsOverlay">
        <div id="settingsTitle">Settings</div>
        <div class="settings-section">
            <label for="upAxis">Up Axis:</label>
            <select id="upAxis">
                <option value="X">X Axis</option>
                <option value="-X">-X Axis</option>
                <option value="Y" selected>Y Axis</option>
                <option value="-Y">-Y Axis</option>
                <option value="Z">Z Axis</option>
                <option value="-Z">-Z Axis</option>
            </select>
        </div>
        <div class="settings-section">
            <label for="materialColor">Material Color:</label>
            <input type="color" id="materialColor" value="#1a1a1a">
        </div>
        <div class="settings-section">
            <label for="glossiness">Glossiness (Roughness):</label>
            <input type="range" id="glossiness" min="0" max="1" step="0.01" value="0.2">
        </div>
        <div class="settings-section">
            <label for="lightIntensity">Scene Realism (Light Intensity):</label>
            <input type="range" id="lightIntensity" min="0.5" max="2" step="0.1" value="1.0">
        </div>
        <div class="settings-section">
            <label for="shadowQuality">Shadow Quality:</label>
            <select id="shadowQuality">
                <option value="1024">Low</option>
                <option value="2048" selected>Medium</option>
                <option value="4096">High</option>
            </select>
        </div>
        <div class="settings-section">
            <label for="orthographicToggle">Orthographic Camera:</label>
            <input type="checkbox" id="orthographicToggle">
        </div>
        <div class="settings-section">
            <label for="applyScope">Apply Changes To:</label>
            <select id="applyScope">
                <option value="global">Global</option>
                <option value="current">Current Model</option>
            </select>
        </div>
        <div class="settings-section">
            <button id="resetSettings">Reset to Defaults</button>
        </div>
    </div>
    <div id="partInfoOverlay">
        <div id="partName"></div>
        <div id="partNumber"></div>
        <div id="partDescription"></div>
        <div class="button-container">
            <div class="button-row">
                <button id="isolatePart">Isolate Part</button>
                <button id="showAllPartsBtn" style="display: none;">Show All Parts</button>
                <button id="toggleGhostMode">Toggle Ghost Mode</button>
            </div>
            
            <!-- Sectioning Controls -->
            <div class="sectioning-section">
                <h4>Sectioning Tools</h4>
                <div class="section-group">
                    <label for="sectionPlaneType">Section Plane:</label>
                    <select id="sectionPlaneType">
                        <option value="XY">XY Plane (Horizontal)</option>
                        <option value="XZ">XZ Plane (Frontal)</option>
                        <option value="YZ">YZ Plane (Side)</option>
                    </select>
                </div>
                <div class="section-group">
                    <label for="sectionPosition">Position:</label>
                    <input type="range" id="sectionPosition" min="-1" max="1" step="0.01" value="0">
                    <span id="sectionPositionValue">0.00</span>
                </div>
                <div class="section-buttons">
                    <button id="createSection" class="section-btn">Create Section</button>
                    <button id="removeSection" class="section-btn">Remove Section</button>
                    <button id="resetSection" class="section-btn">Reset View</button>
                </div>
                <div class="section-toggle">
                    <label for="showCuttingPlane">Show Cutting Plane:</label>
                    <input type="checkbox" id="showCuttingPlane" checked>
                </div>
                <div class="video-controls" id="videoControls" style="display: none;">
                    <button id="playVideo" class="section-btn" disabled>No Video Available</button>
                    <button id="stopVideo" class="section-btn" style="display: none;">Stop Video</button>
                </div>
            </div>
            <div class="view-button-grid">
                <button id="frontView" title="Front View">‚Üó</button>
                <button id="topView" title="Top View">‚Üë</button>
                <button id="backView" title="Back View">‚Üô</button>
                <button id="isometricView" title="Isometric View">‚üê</button>
            </div>
        </div>
    </div>
    <div id="partsList"></div>
    
    
    <div id="stats">
        <div>Total Parts: <span id="totalParts">0</span></div>
        <div>Selected Part: <span id="selectedPart">None</span></div>
        <div>Visible Parts: <span id="visibleParts">0</span></div>
    </div>
    
    <!-- Video Overlay -->
    <div id="videoOverlay" style="display: none;">
        <div id="videoContainer">
            <img id="videoFrame" src="" alt="Video Frame">
            <div id="videoOverlayControls">
                <button id="videoPlayPause">‚è∏Ô∏è</button>
                <button id="videoClose">‚úï</button>
            </div>
        </div>
    </div>
    <button id="settingsGear" class="gear-button">&#9881;</button>
    <script src="part-analyzer.js?v=37"></script>
    <script src="part-manager.js?v=37"></script>
    <script src="assembly-viewer.js?v=37"></script>
</body>
</html>